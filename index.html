<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>Calculador Gama Academy</title>
</head>

<body>

  <form id="calculadora">

    <h3 id="historico"></h3>
    <h2 id="resultado"></h2>

    <div class="linha">
      <!-- Função Apagar -->
      <input onClick="deletar()" type="button" value="AC">
      <!-- Função Corrigir -->
      <input onClick="corrigir()" type="button" value="C">
      <!-- Salvar -->
      <input onClick="salvar()" type="button" value="Save">
    </div>

    <div class="linha">
      <input onClick="botaoNumerico('7')" type="button" value="7">
      <input onClick="botaoNumerico('8')" type="button" value="8">
      <input onClick="botaoNumerico('9')" type="button" value="9">
      <!-- DIVISÃO -->
      <input onClick="botaoOperador(' / ')" type="button" value="/">
    </div>

    <div class="linha">
      <input onClick="botaoNumerico('4')" accesskey="52" type="button" value="4">
      <input onClick="botaoNumerico('5')" type="button" value="5">
      <input onClick="botaoNumerico('6')" type="button" value="6">
      <!-- MULTIPLICAÇÃO -->
      <input onClick="botaoOperador(' * ')" type="button" value="x">
    </div>

    <div class="linha">
      <input onClick="botaoNumerico('1')" type="button" value="1">
      <input onClick="botaoNumerico('2')" type="button" value="2">
      <input onClick="botaoNumerico('3')" type="button" value="3">
      <!-- SUBTRAÇÃO -->
      <input onClick="botaoOperador(' - ')" type="button" value="-">
    </div>

    <div class="linha">
      <input onClick="botaoNumerico('0')" type="button" value="0">
      <!-- Ponto -->
      <input onClick="botaoNumerico('.')" type="button" value=".">
      <!-- IGUALDADE, Função de CALCULAR -->
      <input type="button" value="=" onClick="calcular('=')">
      <!-- SOMA -->
      <input onClick="botaoOperador(' + ')" type="button" value="+">

    </div>
  </form>

  <p id="dadosHistorico"></p>

  <script>

    let telaResultado = document.getElementById("resultado");
    telaResultado.innerHTML = '0';
    let historico = document.getElementById('historico')
    historico.innerHTML = "crie um cálculo"



    var dadosHistorico = [];
    var input = 0;

    function botaoNumerico(value) {

      if (telaResultado.innerHTML == "0" && value != ".") {
        telaResultado.innerHTML = ""
      }
      if (!(value == ".") || !input.match(/[.]/)) {
        input += value
        telaResultado.innerHTML += value
      }
    }

    function botaoOperador(operator) {
      if (input !== 0 && input !== " - ") {
        if (operator === " * ") {
          telaResultado.innerHTML += " x "
          input = 0;
        }
        if (operator !== " * ") {
          telaResultado.innerHTML += operator;
          input = 0;
        }
      }
    }

    function calcular(value) {
      historico.innerHTML = telaResultado.innerHTML + " " + value + " "
      var expressao = telaResultado.innerHTML
      var expressaoCorrigida = expressao.replace(/[x]/g, " * ")
      var resultado = eval(expressaoCorrigida)
      dadosHistorico.push(historico.innerHTML + resultado)
      console.log(dadosHistorico)
      telaResultado.innerHTML = resultado
    }

    function deletar() {
      telaResultado.innerHTML = "0"
      historico.innerHTML = ""
      input = 0
      // dados = []
    }

    function corrigir(){
        input = input.slice(0,-1)
        telaResultado.innerHTML = telaResultado.innerHTML.slice(0,-1)
    }

    function salvar(){
      window.alert(dadosHistorico)
    }

  </script>
</body>

</html>